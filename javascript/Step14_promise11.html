<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h3>이미지를 선택하세요</h3>
    <!---------------------------------------image/ 뒤에 *를 붙이고  multiple을 작성하면  파일을 여러개 선택 가능-->
    <input type="file" id="fileInput" accept="image/*" multiple><!--파일 선택 버튼 생성-->
    <div id="preview"></div>
    <script>
        //이미지 파일을 선택했을 때 실행할 함수 등록
        document.querySelector("#fileInput").addEventListener("change", (e) => {
            //e.target은 "change" 이벤트가 발생한 바로 그 요소의 참조값
            //선택한 파일객체가 들어있는 배열
            //const files = document.querySelector("#fileInput").files;
            const files = e.target.files;
            //fileREader 객체를 이용해서 선택한 파일 데이터를 읽어들인다.
            const reader = new FileReader();
            //files 배열의 0번방에 들어있는 파일을 DataURL 형식으로 읽어들임
            reader.readAsDataURL(files[0]);
            //다 읽었을 때 실행할 함수 등록
            reader.onload = () => {
                //읽은 DataURL 형식의 문자열을 콘솔창에 출력하기
                console.log(reader.result);

                //backtic 을 이용해서 html 형식의 문자열을 구성하기
                //reader.result는 DataURL 형식이기 때문에.
                const img = `<img src="${reader.result}">`;
                    //id가 preview인 곳에 HTML로 해석이 되도록 끼워 넣음
                document.querySelector("#preview").insertAdjacentHTML("beforeend", img);  //div에 선택한 파일 제목 보여줌
            };
            console.log("FIleReader 객체를 이용해서 읽기시작");
        });
    </script>

</body>

</html>